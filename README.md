# Green Sticky Notes 🟢

**シンプルで美しいデスクトップ付箋アプリ**

ミニマルなデザインと直感的な操作で、デスクトップに付箋を貼って管理できるElectronアプリケーションです。

## 📖 目次

- [📥 ダウンロード・インストール](#-ダウンロードインストール)
- [🔄 アップデート方法](#-アップデート方法)
- [🚀 使い方](#-使い方)
- [✨ 特徴](#-特徴)
- [👨‍💻 開発者向けセットアップ](#-開発者向けセットアップ)
- [📋 技術仕様](#-技術仕様)
- [📚 更新履歴](#-更新履歴)

## 📥 ダウンロード・インストール

### 📱 Windows版のダウンロード

[**Releases**](https://github.com/Chan-con/green-sticky-notes/releases)ページから最新版をダウンロードしてください。

### 📋 詳細インストール手順

**1. インストーラーのダウンロード**
- Releasesページで最新版の`Green Sticky Notes Setup x.x.x.exe`をクリック
- ダウンロードが自動で始まります（通常は「ダウンロード」フォルダに保存されます）

**2. インストール実行**
- ダウンロードしたexeファイルをダブルクリック
- Windows Defenderの警告が表示された場合は「詳細情報」→「実行」をクリック
- セットアップウィザードが開始されます

**3. インストール設定**
- インストール先フォルダを選択（デフォルトのままで問題ありません）
- 「インストール」ボタンをクリック

**4. 初回起動**
- インストール完了後、デスクトップアイコンをダブルクリック
- またはスタートメニューで「Green Sticky Notes」を検索して起動
- 初回起動時にサンプル付箋が自動作成されます

**5. タスクトレイ確認**
- アプリが起動すると、画面右下のタスクトレイに緑色のアイコンが表示されます
- このアイコンから付箋の表示/非表示や新規作成ができます

### 💾 データ保存場所

付箋のデータは以下の場所に安全に保存されます：
- **Windows**: `C:\Users\[ユーザー名]\AppData\Roaming\green-sticky\sticky-notes-data\`

### 🗑️ アンインストール方法

1. Windowsの「設定」→「アプリ」→「アプリと機能」を開く
2. 「Green Sticky Notes」を検索
3. 「アンインストール」をクリック
4. 付箋データとデスクトップアイコンも完全に削除されます

## 🔄 アップデート方法

### 📦 新バージョンへのアップデート

**⚠️ 重要：アップデート前に必ずバックアップを取得してください**

新しいバージョンがリリースされた場合、以下の手順でアップデートできます：

**1. バックアップの取得（必須）**
- 付箋データフォルダをバックアップ：
  - `C:\Users\[ユーザー名]\AppData\Roaming\green-sticky\sticky-notes-data\`
- フォルダ全体をデスクトップなど別の場所にコピー
- 「green-sticky-backup-[日付]」などの名前を付けて保存

**2. アップデートの実行**
- [Releasesページ](https://github.com/Chan-con/green-sticky-notes/releases)から最新版をダウンロード
- 新しいインストーラーを実行（既存のアプリが自動で上書きされます）
- 付箋データは自動的に引き継がれます

**3. 動作確認**
- アプリを起動して、以前の付箋が正常に表示されることを確認
- 問題がある場合は、バックアップからデータを復元してください

### 🛡️ バックアップの重要性

- **データ保護**: 予期しない問題からあなたの大切な付箋を守ります
- **安心のアップデート**: 万が一の際も元の状態に戻せます
- **定期的なバックアップ**: 月1回程度の定期バックアップをお勧めします

## 🚀 使い方

### 📝 基本操作

1. **付箋作成**: `+` ボタンで新規付箋を作成
2. **編集開始**: 表示モード付箋をクリックして編集モードに切替
3. **移動**: ヘッダー部分をドラッグして自由に移動
4. **カスタマイズ**: メニューから色・フォントサイズを調整
5. **編集終了**: 付箋外をクリックまたは他の場所にフォーカス移動
6. **削除**: 付箋の内容を空にすると自動削除

### 🖱️ 右クリックメニュー（表示モード時）

表示モードの付箋のテキスト表示エリアを右クリックすると、コンテキストメニューが表示されます：

- **編集時の座標・サイズを初期化**: 付箋が編集モードになった時の表示位置とサイズを現在の表示モード位置にリセット
  - 付箋の表示位置が画面外に移動してしまった場合の復旧に便利
  - 編集時のサイズが大きくなりすぎた場合の調整に使用

### 🎛️ ヘッダーメニュー（編集モード時）

- **+** 新規付箋追加（現在位置に設定継承で作成）- 最左端配置
- **A** 文字サイズ変更（8px〜48px）
- **🎨** カラーピッカー（65色以上の美しいグラデーション配列）
  - 左クリック：ボディ色変更
  - 右クリック：ヘッダー色変更  
  - ダブルクリック：自動調和色調整
- **📌** ピン留め（常に最前面表示）
- **🔒** 編集ロック（フォーカス維持）

### 🎛️ ヘッダーメニュー（表示モード時）

- **+** 新規付箋追加
- **📌** ピン留め切替

### 🔗 URL機能

- **URL自動検出**: 付箋内のURLを自動的に認識
- **ダブルクリック**: 編集モード時、URL部分をダブルクリックでブラウザ表示
- **対応URL**: http://、https://で始まるURLに対応
- **表示時**: 表示モードでは通常テキストとして表示

### 📍 タスクトレイ機能

アプリケーションはタスクトレイに常駐し、以下の操作が可能です：

- **左クリック**: すべての付箋を表示
- **右クリック**: コンテキストメニューを表示
  - **新規付箋を作成**: 新しい付箋をメイン画面に作成
  - **すべてのノートを表示**: 隠れている付箋をすべて表示
  - **すべてのノートを隠す**: すべての付箋を非表示
  - **設定**: ホットキーの設定画面を開く
  - **エクスポート**: 付箋の内容をテキストファイルで一括出力
  - **PC起動時に自動開始**: 自動起動のオン/オフ切り替え
  - **アプリを終了**: アプリケーションを完全に終了

ウィンドウをすべて閉じてもアプリは終了せず、タスクトレイから操作できます。

### 🔍 検索機能

作成した付箋を素早く見つけるための強力な検索機能を搭載しています：

**🔧 検索ウィンドウの開き方**
- タスクトレイメニューの「設定」で検索ホットキーを設定
- 設定したホットキーを押すと検索ウィンドウが開きます
- 同じホットキーで検索ウィンドウの表示/非表示を切り替え可能

**📝 検索の使い方**
1. **キーワード入力**: 検索窓に探したい文字を入力
2. **リアルタイム検索**: 入力と同時に該当する付箋が表示
3. **複数キーワード**: スペースで区切って複数キーワード検索が可能
4. **大文字小文字**: 「大文字小文字を区別」オプションで正確な検索
5. **結果選択**: ↑↓キーで結果を選択、Enterで付箋を開く
6. **検索終了**: Escキーまたは検索ホットキーで閉じる

**🎯 検索のコツ**
- **部分一致**: 単語の一部でも検索可能
- **複数キーワード**: 「会議 資料」のように複数の単語で絞り込み
- **ハイライト表示**: 検索結果で該当箇所がハイライト表示されます

### ⌨️ ホットキー機能

タスクトレイメニューの「設定」から、カスタムホットキーを設定できます：

- **すべてのノートを表示**: 設定したキーの組み合わせで、隠れている付箋をすべて表示
- **すべてのノートを隠す**: 設定したキーの組み合わせで、すべての付箋を非表示
- **検索ウィンドウの表示/非表示**: 付箋検索ウィンドウの表示を切り替え

### ⌨️ ショートカットキー機能

編集モードの付箋に対してのみ使用できるショートカットキーを設定できます：

- **編集中付箋のピン留め切り替え**: 現在編集中の付箋のピン留めを切り替え
- **編集中付箋のロック切り替え**: 現在編集中の付箋の編集ロックを切り替え
- ホットキーとは別に設定可能で、編集中付箋に対してのみ機能

**🔧 ホットキー設定方法**
1. タスクトレイアイコンを右クリック → 「設定」をクリック
2. 設定したい機能の入力欄をクリック
3. 使用したいキーの組み合わせを押す（例：`Ctrl+Shift+S`）
4. 「保存」ボタンをクリック

### ⚙️ 詳細設定機能

設定画面では、アプリの動作をカスタマイズできます：

**🎨 外観設定**
- **ヘッダーアイコンサイズ**: 付箋ヘッダーのアイコンサイズを調整（12-32px）
  - スライダーまたは数値入力で正確に設定可能

**📏 サイズ設定**
- **表示モードの幅**: 付箋の表示モード時の幅を設定（50-300px）
- **表示モードの高さ**: 付箋の表示モード時の高さを設定（50-200px）
- **表示モードのフォントサイズ**: 表示モード時のフォントサイズを設定（8-20px）
- スライダーと数値入力フィールドでの直接入力に対応
- リアルタイムプレビューで変更内容を即座に確認

**🚀 システム設定**
- **PC起動時に自動開始**: Windows起動時にアプリを自動で開始

**📤 エクスポート機能**
- **テキストファイル出力**: 全ての付箋の内容をテキストファイルで一括出力
- **フォルダ選択**: 保存先フォルダを自由に選択可能
- **自動整理**: 出力日時でフォルダを自動作成し整理

**💡 ホットキーの便利な使い方**
- 作業中に素早く付箋を隠したい時
- デスクトップを整理したい時
- プレゼンテーション前に画面をクリーンにしたい時
- 付箋を忘れずに確認したい時
- 大量の付箋から特定の内容を素早く見つけたい時

設定したホットキーは、アプリがバックグラウンドで動作している限り、他のアプリを使用中でもグローバルに機能します。

## ✨ 特徴

### 🎯 スマートな動作

- **2つのモード**: 表示モード時はコンパクト、編集モード時は編集可能に自動切替
- **インテリジェント配置**: 新しい付箋は親付箋と同じ位置に重ねて配置、設定も自動継承
- **初回展開位置記憶**: 初回編集モード化時はその場で拡大（左上にジャンプしない）
- **自動削除**: 最後の付箋が空になると新しい付箋が自動作成

### 🎨 カスタマイズ

- **豊富なカラーパレット**: 65色以上の美しいグラデーション配列から選択
  - レッド・ピンク系、オレンジ・コーラル系、イエロー系
  - ライム・グリーン系、シアン・ティール系、ブルー系
  - パープル・バイオレット系、ホワイト・グレー系
- **フォントサイズ調整**: 8px〜48pxまで細かく設定可能
- **設定継承**: 新規付箋は親付箋の色・フォント・ピン設定を自動継承

### 🖥️ ユーザビリティ

- **リサイズ制御**: 表示モード時はリサイズ無効で誤操作防止
- **レスポンシブメニュー**: 小さな付箋でもメニューが見切れない設計
- **マルチディスプレイ対応**: 複数画面での使用に完全対応
- **データ永続化**: アプリ終了後も位置・内容・設定が保持
- **キーボードショートカット**: ESC１回で編集モード終了
- **カスタムホットキー**: グローバルホットキーで素早い操作が可能
- **高速検索**: 大量の付箋からリアルタイムでキーワード検索が可能

### 🔒 プライバシー・セキュリティ

- **ローカル保存**: すべての付箋内容はあなたのPC内にのみ保存されます
- **インターネット不要**: ネットワーク接続なしで完全に動作します
- **プライベート**: 第三者サーバーへのデータ送信は一切ありません

## 👨‍💻 開発者向けセットアップ

```bash
# リポジトリクローン
git clone https://github.com/Chan-con/green-sticky-notes.git
cd green-sticky-notes

# 依存関係のインストール
npm install

# 開発モード（ホットリロード）
npm run dev

# ビルド
npm run build

# アプリケーション起動
npm start

# パッケージ化
npm run package:all
```

## 📋 技術仕様

### 🏗️ アーキテクチャ

- **フレームワーク**: Electron + React + TypeScript
- **スタイリング**: CSS3 + CSS Variables
- **データ保存**: JSON ファイル（ユーザーデータディレクトリ）
- **ディスプレイ管理**: Electron Screen API
- **プロセス間通信**: IPC（Inter-Process Communication）
- **セキュリティ**: contextIsolation有効、nodeIntegration無効

### 🗂️ ファイル構成

```
src/
├── main/               # Electronメインプロセス
│   ├── main.ts        # アプリケーション起動・ウィンドウ管理・IPC
│   ├── dataStore.ts   # データ永続化・CRUD操作
│   ├── preload.ts     # セキュアなAPI橋渡し
│   ├── searchService.ts # 検索機能
│   └── windowStateManager.ts # ウィンドウ状態管理
├── renderer/          # Reactレンダラープロセス  
│   ├── components/    # Reactコンポーネント
│   │   ├── StickyNoteApp.tsx # メイン付箋アプリ
│   │   ├── NoteHeader.tsx    # ヘッダーUI・操作
│   │   ├── NoteContent.tsx   # 付箋内容・編集
│   │   ├── SearchApp.tsx     # 検索UI
│   │   └── SettingsApp.tsx   # 設定UI
│   ├── styles/        # CSSスタイル
│   │   ├── global.css # 共通スタイル
│   │   ├── search.css # 検索画面スタイル
│   │   └── settings.css # 設定画面スタイル
│   ├── types.d.ts     # TypeScript型定義
│   └── index.tsx      # エントリーポイント
└── types/             # 共通TypeScript型定義
    └── index.ts       # アプリケーション型定義
```

### 🗄️ データ保存場所

- **Linux**: `~/.config/green-sticky/sticky-notes-data/`
- **Windows**: `%APPDATA%/green-sticky/sticky-notes-data/`
- **macOS**: `~/Library/Application Support/green-sticky/sticky-notes-data/`

### 🔧 主要な技術的特徴

- **マルチプロセスアーキテクチャ**: メインプロセスとレンダラープロセスの分離
- **型安全性**: TypeScriptによる完全な型定義
- **セキュアな通信**: contextBridge経由の安全なIPC通信
- **リアルタイム検索**: インクリメンタル検索による高速検索
- **状態管理**: ウィンドウ状態とデータの永続化
- **クロスプラットフォーム**: Windows/macOS/Linux対応

## 📚 更新履歴

### v1.1.5 (2025年1月)
- **コンテキストメニュー基盤実装**: 非アクティブ付箋での右クリック機能基盤を追加
- **座標リセット機能**: アクティブ時の座標・サイズを初期化する機能を実装
- **IPC通信システム強化**: メインプロセス ↔ レンダラープロセス間の通信を強化
- **型安全性向上**: TypeScript型定義を完備し、API設計を型安全に
- **デバッグ基盤整備**: 包括的なデバッグシステムで開発・保守性を向上
- **将来拡張への準備**: コンテキストメニュー機能の将来的な拡張に向けた基盤を完成

### v1.1.1 (2024年7月)
- **ESCキー操作の改善**: ESC２回連続→１回押しで編集モード終了に変更
- **状態不整合の修正**: アイコンが表示モード状態でもウィンドウサイズが戻らない問題を解決
- **レスポンシブ性能の向上**: 状態変更時のUI反応速度を改善
